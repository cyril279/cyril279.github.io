<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>topLevelFile.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="kodi">Kodi</h1>
<p><strong><a href="https://github.com/xbmc/xbmc/blob/master/docs/README.Fedora.md">Build it from source</a></strong><br>
(because RPMfusion/fedora packages lack ISO-dvd playback)<br>
tested as of 2018/01/03, using on sda5</p>
<ul>
<li>Addons
<ul>
<li><a href="#pvr.hts">pvr.hts</a></li>
<li><a href="#vfs.rar">vfs.rar</a></li>
</ul>
</li>
</ul>
<p><strong>Overview:</strong></p>
<ul>
<li>download source</li>
<li>install packages specifically for building</li>
<li>initiate build directories</li>
<li>if necessary: build missing dependencies &amp; re-initiate build directories</li>
<li>build, (test,) install, profit</li>
<li>build &amp; install addons as needed</li>
</ul>
<p><strong>path install info:</strong><br>
<code>/usr/share/kodi</code>  when installed from a binary package (ie PPA, rpm, deb, etc)<br>
<code>/usr/local/share/kodi</code>  when compiled (unless you specify an alternate prefix)</p>
<p><strong>install <a href="https://github.com/xbmc/xbmc/blob/master/docs/README.Fedora.md#3-install-the-required-packages">needed packages</a> +wayland requisites</strong></p>
<p><strong>get source, prep &amp; build kodi.app:</strong><br>
(kodi source directory can be on remote pc, but build directory(ies) should be local for easiest execution)<br>
<code>mkdir ~/workshop.kodi; cd _$</code><br>
<code>git clone kodi.git source</code><br>
<code>mkdir build.wayland; cd _$</code></p>
<p>to build specific tag/release:<br>
<code>git checkout tags/&lt;tag_name&gt; -b &lt;branch_name&gt;</code></p>
<p><strong>prep-x11:</strong><br>
<code>cmake ../source -DCMAKE_INSTALL_PREFIX=/usr/local</code></p>
<p><strong>prep-wayland:</strong><br>
<code>cmake ../source -DCMAKE_INSTALL_PREFIX=/usr/local -DCORE_PLATFORM_NAME=wayland -DWAYLAND_RENDER_SYSTEM=gl</code></p>
<p>error message about missing dependencies during prep?<br>
<a href="https://github.com/xbmc/xbmc/blob/master/docs/README.Linux.md#31-build-missing-dependencies">build missing dependencies</a> , then prep again.</p>
<p><strong>build:</strong><br>
<code>cmake --build . -- VERBOSE=1 -j$(getconf _NPROCESSORS_ONLN)</code></p>
<p><strong>install:</strong><br>
<code>sudo make install -j$(getconf _NPROCESSORS_ONLN)</code></p>
<h2 id="addons">Addons</h2>
<h3 id="pvr.hts">pvr.hts</h3>
<p>Provides tvheadend interface<br>
<strong>prep &amp; build <a href="https://github.com/kodi-pvr/pvr.hts#linux">addon.pvr.hts</a></strong><br>
<code>cd ~/workshop.kodi</code><br>
<code>git clone pvr.hts.git</code><br>
<code>mkdir pvr.hts/build; cd $_</code><br>
<code>cmake -DADDONS_TO_BUILD=pvr.hts -DADDON_SRC_PREFIX=../.. -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/usr/share/kodi/addons -DPACKAGE_ZIP=1 ../../source/cmake/addons</code><br>
<code>make</code> #also installs</p>
<pre><code>-DCMAKE_INSTALL_PREFIX=../../build/addons
-DCMAKE_INSTALL_PREFIX=/usr/local/share/kodi/addons
</code></pre>
<h3 id="vfs.rar">vfs.rar</h3>
<p>Allows listing and execution of archived content<br>
<strong>prep &amp; build <a href="https://github.com/xbmc/vfs.rar">addon.vfs.rar</a></strong><br>
<code>cd ~/workshop.kodi</code><br>
<code>git clone vfs.rar.git</code><br>
<code>mkdir vfs.rar/build; cd $_</code><br>
<code>cmake -DADDONS_TO_BUILD=vfs.rar -DADDON_SRC_PREFIX=../.. -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/usr/share/kodi/addons -DPACKAGE_ZIP=1 ../../source/cmake/addons</code><br>
<code>make</code> #also installs</p>
<pre><code>-DCMAKE_INSTALL_PREFIX=../../build/addons
-DCMAKE_INSTALL_PREFIX=/usr/local/share/kodi/addons
</code></pre>
<h2 id="notes">Notes:</h2>
<p><strong>unset cmake cache variables:</strong><br>
<code>cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local -UCORE_PLATFORM_NAME -UWAYLAND_RENDER_SYSTEM</code></p>
<p>Multi-episode (tv) files are incorrectly listed in the library.<br>
settings &gt; media &gt; library &gt; video &gt; [tv_kids]  ← menu, change content,…<br>
while setting the content type for tv_kids to ‘tv shows’, enable ‘dvd order’ within [settings].<br>
This allows the tv show list to correctly title each listing when the show contains multiple episodes.</p>
<h2 id="installation-via-rpmfusion">Installation via RPMfusion:</h2>
<p>Easiest method, but **lacks ISO-dvd playback on Fedora (**Fedora/RPM fusion do not include complete/correct versions of libraries needed for iso playback)</p>
<p>RPMfusion provides dnf-installables within days of the release.<br>
<code>dnf --enablerepo=rpmfusion-free-updates-testing --refresh upgrade</code></p>
</div>
</body>

</html>

